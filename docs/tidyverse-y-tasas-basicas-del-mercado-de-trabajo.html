<!DOCTYPE html>
<html >

<head>

  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <title>Capítulo 4 Tidyverse y Tasas básicas del Mercado de Trabajo | Introducción a R para Ciencias Sociales. Aplicación practica en la EPH</title>
  <meta name="description" content="Capítulo 4 Tidyverse y Tasas básicas del Mercado de Trabajo | Introducción a R para Ciencias Sociales. Aplicación practica en la EPH">
  <meta name="generator" content="bookdown  and GitBook 2.6.7">

  <meta property="og:title" content="Capítulo 4 Tidyverse y Tasas básicas del Mercado de Trabajo | Introducción a R para Ciencias Sociales. Aplicación practica en la EPH" />
  <meta property="og:type" content="book" />
  
  
  
  

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Capítulo 4 Tidyverse y Tasas básicas del Mercado de Trabajo | Introducción a R para Ciencias Sociales. Aplicación practica en la EPH" />
  
  
  

<meta name="author" content="Pablo Tiscornia - Guido Weksler - Diego Kozlowski - Natsumi Shokida.">



  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black">
  
  
<link rel="prev" href="introduccion-a-r.html">
<link rel="next" href="calculo-de-pobreza-por-linea.html">
<script src="libs/jquery-2.2.3/jquery.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />









<style type="text/css">
a.sourceLine { display: inline-block; line-height: 1.25; }
a.sourceLine { pointer-events: none; color: inherit; text-decoration: inherit; }
a.sourceLine:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode { white-space: pre; position: relative; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
code.sourceCode { white-space: pre-wrap; }
a.sourceLine { text-indent: -1em; padding-left: 1em; }
}
pre.numberSource a.sourceLine
  { position: relative; left: -4em; }
pre.numberSource a.sourceLine::before
  { content: attr(data-line-number);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; pointer-events: all; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {  }
@media screen {
a.sourceLine::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li class="chapter" data-level="1" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i><b>1</b> Introducción</a><ul>
<li class="chapter" data-level="1.1" data-path="index.html"><a href="index.html#presentacion"><i class="fa fa-check"></i><b>1.1</b> Presentación</a></li>
<li class="chapter" data-level="1.2" data-path="index.html"><a href="index.html#objetivos-del-curso"><i class="fa fa-check"></i><b>1.2</b> Objetivos del curso</a></li>
<li class="chapter" data-level="1.3" data-path="index.html"><a href="index.html#clases-y-contenido"><i class="fa fa-check"></i><b>1.3</b> Clases y contenido</a></li>
<li class="chapter" data-level="1.4" data-path="index.html"><a href="index.html#librerias-a-instalar"><i class="fa fa-check"></i><b>1.4</b> Librerias a instalar</a></li>
</ul></li>
<li class="chapter" data-level="2" data-path="conceptos-principales-de-eph.html"><a href="conceptos-principales-de-eph.html"><i class="fa fa-check"></i><b>2</b> Conceptos Principales de EPH</a><ul>
<li class="chapter" data-level="2.1" data-path="conceptos-principales-de-eph.html"><a href="conceptos-principales-de-eph.html#que-es-la-eph"><i class="fa fa-check"></i><b>2.1</b> ¿Qué es la EPH?</a></li>
<li class="chapter" data-level="2.2" data-path="conceptos-principales-de-eph.html"><a href="conceptos-principales-de-eph.html#traduzcamos"><i class="fa fa-check"></i><b>2.2</b> Traduzcamos</a><ul>
<li class="chapter" data-level="2.2.1" data-path="conceptos-principales-de-eph.html"><a href="conceptos-principales-de-eph.html#objetivos-de-la-eph"><i class="fa fa-check"></i><b>2.2.1</b> Objetivos de la EPH</a></li>
</ul></li>
<li class="chapter" data-level="2.3" data-path="conceptos-principales-de-eph.html"><a href="conceptos-principales-de-eph.html#caracteristicas-de-la-eph"><i class="fa fa-check"></i><b>2.3</b> Características de la EPH</a></li>
<li class="chapter" data-level="2.4" data-path="conceptos-principales-de-eph.html"><a href="conceptos-principales-de-eph.html#la-muestra"><i class="fa fa-check"></i><b>2.4</b> La Muestra</a><ul>
<li class="chapter" data-level="2.4.1" data-path="conceptos-principales-de-eph.html"><a href="conceptos-principales-de-eph.html#principales-tematicas-abordadas-por-la-eph"><i class="fa fa-check"></i><b>2.4.1</b> Principales temáticas abordadas por la EPH</a></li>
</ul></li>
<li class="chapter" data-level="2.5" data-path="conceptos-principales-de-eph.html"><a href="conceptos-principales-de-eph.html#instrumento-de-medicion-el-medio-hacia-la-operacionalizacion-de-los-objetivos"><i class="fa fa-check"></i><b>2.5</b> Instrumento de medición: El medio hacia la operacionalización de los objetivos</a></li>
<li class="chapter" data-level="2.6" data-path="conceptos-principales-de-eph.html"><a href="conceptos-principales-de-eph.html#tres-cuestionarios"><i class="fa fa-check"></i><b>2.6</b> Tres cuestionarios</a><ul>
<li class="chapter" data-level="2.6.1" data-path="conceptos-principales-de-eph.html"><a href="conceptos-principales-de-eph.html#cuestionario-de-vivienda"><i class="fa fa-check"></i><b>2.6.1</b> Cuestionario de vivienda</a></li>
<li class="chapter" data-level="2.6.2" data-path="conceptos-principales-de-eph.html"><a href="conceptos-principales-de-eph.html#cuestionario-de-hogar"><i class="fa fa-check"></i><b>2.6.2</b> Cuestionario de hogar</a></li>
</ul></li>
<li class="chapter" data-level="2.7" data-path="conceptos-principales-de-eph.html"><a href="conceptos-principales-de-eph.html#marco-analitico-y-tematico-de-la-eph"><i class="fa fa-check"></i><b>2.7</b> Marco analítico y temático de la EPH</a><ul>
<li class="chapter" data-level="2.7.1" data-path="conceptos-principales-de-eph.html"><a href="conceptos-principales-de-eph.html#cuestionario-de-individuos"><i class="fa fa-check"></i><b>2.7.1</b> Cuestionario de individuos</a></li>
</ul></li>
<li class="chapter" data-level="2.8" data-path="conceptos-principales-de-eph.html"><a href="conceptos-principales-de-eph.html#cuestinario-individual-principales-indicadores"><i class="fa fa-check"></i><b>2.8</b> Cuestinario individual: Principales indicadores</a></li>
<li class="chapter" data-level="2.9" data-path="conceptos-principales-de-eph.html"><a href="conceptos-principales-de-eph.html#caracterizacion-de-la-poblacion-ocupada"><i class="fa fa-check"></i><b>2.9</b> Caracterización de la población ocupada</a><ul>
<li class="chapter" data-level="2.9.1" data-path="conceptos-principales-de-eph.html"><a href="conceptos-principales-de-eph.html#otros-indicadores-para-describir-a-la-poblacion-ocupada"><i class="fa fa-check"></i><b>2.9.1</b> Otros indicadores para describir a la población ocupada</a></li>
<li class="chapter" data-level="2.9.2" data-path="conceptos-principales-de-eph.html"><a href="conceptos-principales-de-eph.html#caracterizacion-de-la-poblacion-desocupada"><i class="fa fa-check"></i><b>2.9.2</b> Caracterízación de la población desocupada</a></li>
<li class="chapter" data-level="2.9.3" data-path="conceptos-principales-de-eph.html"><a href="conceptos-principales-de-eph.html#clasificadores-utilizados-en-la-eph-rama-de-actividad-y-tarea-ocupacion"><i class="fa fa-check"></i><b>2.9.3</b> Clasificadores utilizados en la EPH (Rama de actividad y Tarea / Ocupación)</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="3" data-path="introduccion-a-r.html"><a href="introduccion-a-r.html"><i class="fa fa-check"></i><b>3</b> Introducción a R</a><ul>
<li class="chapter" data-level="3.0.1" data-path="introduccion-a-r.html"><a href="introduccion-a-r.html#que-es-r"><i class="fa fa-check"></i><b>3.0.1</b> ¿Que es R?</a></li>
<li class="chapter" data-level="3.0.2" data-path="introduccion-a-r.html"><a href="introduccion-a-r.html#diferencias-con-stata-y-spss"><i class="fa fa-check"></i><b>3.0.2</b> Diferencias con STATA y SPSS</a></li>
<li class="chapter" data-level="3.1" data-path="introduccion-a-r.html"><a href="introduccion-a-r.html#logica-sintactica."><i class="fa fa-check"></i><b>3.1</b> Lógica sintáctica.</a><ul>
<li class="chapter" data-level="3.1.1" data-path="introduccion-a-r.html"><a href="introduccion-a-r.html#definicion-de-objetos"><i class="fa fa-check"></i><b>3.1.1</b> Definición de objetos</a></li>
<li class="chapter" data-level="3.1.2" data-path="introduccion-a-r.html"><a href="introduccion-a-r.html#r-base"><i class="fa fa-check"></i><b>3.1.2</b> R base</a></li>
<li class="chapter" data-level="3.1.3" data-path="introduccion-a-r.html"><a href="introduccion-a-r.html#data-frames"><i class="fa fa-check"></i><b>3.1.3</b> Data Frames</a></li>
<li class="chapter" data-level="3.1.4" data-path="introduccion-a-r.html"><a href="introduccion-a-r.html#listas"><i class="fa fa-check"></i><b>3.1.4</b> Listas</a></li>
<li class="chapter" data-level="3.1.5" data-path="introduccion-a-r.html"><a href="introduccion-a-r.html#instalacion-de-paquetes-complementarios-al-r-base"><i class="fa fa-check"></i><b>3.1.5</b> Instalación de paquetes complementarios al R Base</a></li>
<li class="chapter" data-level="3.1.6" data-path="introduccion-a-r.html"><a href="introduccion-a-r.html#lectura-y-escritura-de-archivos"><i class="fa fa-check"></i><b>3.1.6</b> Lectura y escritura de archivos</a></li>
<li class="chapter" data-level="3.1.7" data-path="introduccion-a-r.html"><a href="introduccion-a-r.html#ambientes-de-trabajo"><i class="fa fa-check"></i><b>3.1.7</b> Ambientes de trabajo</a></li>
<li class="chapter" data-level="3.1.8" data-path="introduccion-a-r.html"><a href="introduccion-a-r.html#paquetes-a-utilizar-a-lo-largo-del-curso"><i class="fa fa-check"></i><b>3.1.8</b> Paquetes a utilizar a lo largo del curso:</a></li>
<li class="chapter" data-level="3.1.9" data-path="introduccion-a-r.html"><a href="introduccion-a-r.html#ejercicios-para-practicar"><i class="fa fa-check"></i><b>3.1.9</b> Ejercicios para practicar</a></li>
<li class="chapter" data-level="3.1.10" data-path="introduccion-a-r.html"><a href="introduccion-a-r.html#ejercicios-de-tarea"><i class="fa fa-check"></i><b>3.1.10</b> Ejercicios de tarea</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="4" data-path="tidyverse-y-tasas-basicas-del-mercado-de-trabajo.html"><a href="tidyverse-y-tasas-basicas-del-mercado-de-trabajo.html"><i class="fa fa-check"></i><b>4</b> Tidyverse y Tasas básicas del Mercado de Trabajo</a><ul>
<li class="chapter" data-level="4.1" data-path="tidyverse-y-tasas-basicas-del-mercado-de-trabajo.html"><a href="tidyverse-y-tasas-basicas-del-mercado-de-trabajo.html#estructuracion-de-bases-de-datos"><i class="fa fa-check"></i><b>4.1</b> Estructuración de Bases de Datos</a></li>
<li class="chapter" data-level="4.2" data-path="tidyverse-y-tasas-basicas-del-mercado-de-trabajo.html"><a href="tidyverse-y-tasas-basicas-del-mercado-de-trabajo.html#dplyr"><i class="fa fa-check"></i><b>4.2</b> Dplyr</a><ul>
<li class="chapter" data-level="4.2.1" data-path="tidyverse-y-tasas-basicas-del-mercado-de-trabajo.html"><a href="tidyverse-y-tasas-basicas-del-mercado-de-trabajo.html#filter"><i class="fa fa-check"></i><b>4.2.1</b> filter</a></li>
<li class="chapter" data-level="4.2.2" data-path="tidyverse-y-tasas-basicas-del-mercado-de-trabajo.html"><a href="tidyverse-y-tasas-basicas-del-mercado-de-trabajo.html#rename"><i class="fa fa-check"></i><b>4.2.2</b> rename</a></li>
<li class="chapter" data-level="4.2.3" data-path="tidyverse-y-tasas-basicas-del-mercado-de-trabajo.html"><a href="tidyverse-y-tasas-basicas-del-mercado-de-trabajo.html#mutate"><i class="fa fa-check"></i><b>4.2.3</b> mutate</a></li>
<li class="chapter" data-level="4.2.4" data-path="tidyverse-y-tasas-basicas-del-mercado-de-trabajo.html"><a href="tidyverse-y-tasas-basicas-del-mercado-de-trabajo.html#case_when"><i class="fa fa-check"></i><b>4.2.4</b> case_when</a></li>
<li class="chapter" data-level="4.2.5" data-path="tidyverse-y-tasas-basicas-del-mercado-de-trabajo.html"><a href="tidyverse-y-tasas-basicas-del-mercado-de-trabajo.html#select"><i class="fa fa-check"></i><b>4.2.5</b> select</a></li>
<li class="chapter" data-level="4.2.6" data-path="tidyverse-y-tasas-basicas-del-mercado-de-trabajo.html"><a href="tidyverse-y-tasas-basicas-del-mercado-de-trabajo.html#arrange"><i class="fa fa-check"></i><b>4.2.6</b> arrange</a></li>
<li class="chapter" data-level="4.2.7" data-path="tidyverse-y-tasas-basicas-del-mercado-de-trabajo.html"><a href="tidyverse-y-tasas-basicas-del-mercado-de-trabajo.html#summarise"><i class="fa fa-check"></i><b>4.2.7</b> summarise</a></li>
<li class="chapter" data-level="4.2.8" data-path="tidyverse-y-tasas-basicas-del-mercado-de-trabajo.html"><a href="tidyverse-y-tasas-basicas-del-mercado-de-trabajo.html#group_by"><i class="fa fa-check"></i><b>4.2.8</b> group_by</a></li>
</ul></li>
<li class="chapter" data-level="4.3" data-path="tidyverse-y-tasas-basicas-del-mercado-de-trabajo.html"><a href="tidyverse-y-tasas-basicas-del-mercado-de-trabajo.html#joins"><i class="fa fa-check"></i><b>4.3</b> Joins</a><ul>
<li class="chapter" data-level="4.3.1" data-path="tidyverse-y-tasas-basicas-del-mercado-de-trabajo.html"><a href="tidyverse-y-tasas-basicas-del-mercado-de-trabajo.html#left_join"><i class="fa fa-check"></i><b>4.3.1</b> left_join</a></li>
</ul></li>
<li class="chapter" data-level="4.4" data-path="tidyverse-y-tasas-basicas-del-mercado-de-trabajo.html"><a href="tidyverse-y-tasas-basicas-del-mercado-de-trabajo.html#tidyr"><i class="fa fa-check"></i><b>4.4</b> Tidyr</a><ul>
<li class="chapter" data-level="4.4.1" data-path="tidyverse-y-tasas-basicas-del-mercado-de-trabajo.html"><a href="tidyverse-y-tasas-basicas-del-mercado-de-trabajo.html#gather-y-spread"><i class="fa fa-check"></i><b>4.4.1</b> Gather y Spread</a></li>
</ul></li>
<li class="chapter" data-level="4.5" data-path="tidyverse-y-tasas-basicas-del-mercado-de-trabajo.html"><a href="tidyverse-y-tasas-basicas-del-mercado-de-trabajo.html#tasas-del-mercado-de-trabajo"><i class="fa fa-check"></i><b>4.5</b> Tasas del Mercado de Trabajo</a><ul>
<li class="chapter" data-level="4.5.1" data-path="tidyverse-y-tasas-basicas-del-mercado-de-trabajo.html"><a href="tidyverse-y-tasas-basicas-del-mercado-de-trabajo.html#tasa-de-empleo"><i class="fa fa-check"></i><b>4.5.1</b> Tasa de Empleo</a></li>
<li class="chapter" data-level="4.5.2" data-path="tidyverse-y-tasas-basicas-del-mercado-de-trabajo.html"><a href="tidyverse-y-tasas-basicas-del-mercado-de-trabajo.html#tasas-basicas---total-aglomerados"><i class="fa fa-check"></i><b>4.5.2</b> Tásas Básicas - Total Aglomerados</a></li>
<li class="chapter" data-level="4.5.3" data-path="tidyverse-y-tasas-basicas-del-mercado-de-trabajo.html"><a href="tidyverse-y-tasas-basicas-del-mercado-de-trabajo.html#tasas-basicas-por-aglomerado"><i class="fa fa-check"></i><b>4.5.3</b> Tásas Básicas por Aglomerado</a></li>
<li class="chapter" data-level="4.5.4" data-path="tidyverse-y-tasas-basicas-del-mercado-de-trabajo.html"><a href="tidyverse-y-tasas-basicas-del-mercado-de-trabajo.html#ejercicio-para-2-trimestres"><i class="fa fa-check"></i><b>4.5.4</b> Ejercicio para 2 trimestres</a></li>
</ul></li>
<li class="chapter" data-level="4.6" data-path="tidyverse-y-tasas-basicas-del-mercado-de-trabajo.html"><a href="tidyverse-y-tasas-basicas-del-mercado-de-trabajo.html#ejercicios-para-practicar-1"><i class="fa fa-check"></i><b>4.6</b> Ejercicios para practicar</a><ul>
<li class="chapter" data-level="4.6.1" data-path="tidyverse-y-tasas-basicas-del-mercado-de-trabajo.html"><a href="tidyverse-y-tasas-basicas-del-mercado-de-trabajo.html#ejercicios-de-tarea-1"><i class="fa fa-check"></i><b>4.6.1</b> Ejercicios de tarea</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="5" data-path="calculo-de-pobreza-por-linea.html"><a href="calculo-de-pobreza-por-linea.html"><i class="fa fa-check"></i><b>5</b> Cálculo de Pobreza por Línea</a><ul>
<li class="chapter" data-level="5.1" data-path="calculo-de-pobreza-por-linea.html"><a href="calculo-de-pobreza-por-linea.html#canastas-trimestrales-por-region"><i class="fa fa-check"></i><b>5.1</b> Canastas Trimestrales por Region</a></li>
<li class="chapter" data-level="5.2" data-path="calculo-de-pobreza-por-linea.html"><a href="calculo-de-pobreza-por-linea.html#unidades-de-adulto-equivalente-por-hogar-en-la-base-individual"><i class="fa fa-check"></i><b>5.2</b> Unidades de Adulto Equivalente por hogar en la base Individual</a></li>
<li class="chapter" data-level="5.3" data-path="calculo-de-pobreza-por-linea.html"><a href="calculo-de-pobreza-por-linea.html#calculo-de-tasas-de-pobreza-e-indigencia"><i class="fa fa-check"></i><b>5.3</b> Cálculo de Tasas de Pobreza e Indigencia</a></li>
<li class="chapter" data-level="5.4" data-path="introduccion-a-r.html"><a href="introduccion-a-r.html#ejercicios-para-practicar"><i class="fa fa-check"></i><b>5.4</b> Ejercicios Para prácticar</a></li>
<li class="chapter" data-level="5.5" data-path="calculo-de-pobreza-por-linea.html"><a href="calculo-de-pobreza-por-linea.html#ejercicios-de-tarea-2"><i class="fa fa-check"></i><b>5.5</b> Ejercicios de tarea</a></li>
</ul></li>
<li class="chapter" data-level="6" data-path="graficos-y-distribucion-del-ingreso.html"><a href="graficos-y-distribucion-del-ingreso.html"><i class="fa fa-check"></i><b>6</b> Gráficos y Distribución del Ingreso</a><ul>
<li class="chapter" data-level="6.1" data-path="graficos-y-distribucion-del-ingreso.html"><a href="graficos-y-distribucion-del-ingreso.html#graficos-basicos-en-r"><i class="fa fa-check"></i><b>6.1</b> Gráficos Básicos en R</a><ul>
<li class="chapter" data-level="6.1.1" data-path="graficos-y-distribucion-del-ingreso.html"><a href="graficos-y-distribucion-del-ingreso.html#png"><i class="fa fa-check"></i><b>6.1.1</b> png</a></li>
</ul></li>
<li class="chapter" data-level="6.2" data-path="graficos-y-distribucion-del-ingreso.html"><a href="graficos-y-distribucion-del-ingreso.html#ggplot2"><i class="fa fa-check"></i><b>6.2</b> <span>Ggplot2</span></a><ul>
<li class="chapter" data-level="6.2.1" data-path="graficos-y-distribucion-del-ingreso.html"><a href="graficos-y-distribucion-del-ingreso.html#grafico-de-puntos"><i class="fa fa-check"></i><b>6.2.1</b> Gráfico de Puntos</a></li>
<li class="chapter" data-level="6.2.2" data-path="graficos-y-distribucion-del-ingreso.html"><a href="graficos-y-distribucion-del-ingreso.html#extensiones-de-ggplot."><i class="fa fa-check"></i><b>6.2.2</b> Extensiones de <span>GGplot</span>.</a></li>
</ul></li>
<li class="chapter" data-level="6.3" data-path="graficos-y-distribucion-del-ingreso.html"><a href="graficos-y-distribucion-del-ingreso.html#graficos-ingresos---eph"><i class="fa fa-check"></i><b>6.3</b> Graficos Ingresos - EPH</a><ul>
<li class="chapter" data-level="6.3.1" data-path="graficos-y-distribucion-del-ingreso.html"><a href="graficos-y-distribucion-del-ingreso.html#ingreso-de-la-ocupacion-principal"><i class="fa fa-check"></i><b>6.3.1</b> Ingreso de la ocupación principal</a></li>
<li class="chapter" data-level="6.3.2" data-path="graficos-y-distribucion-del-ingreso.html"><a href="graficos-y-distribucion-del-ingreso.html#distribucion-de-los-ingresos-laborales-y-no-laborales-por-sexo"><i class="fa fa-check"></i><b>6.3.2</b> Distribución de los ingresos laborales y no laborales por sexo</a></li>
<li class="chapter" data-level="6.3.3" data-path="graficos-y-distribucion-del-ingreso.html"><a href="graficos-y-distribucion-del-ingreso.html#otros-graficos"><i class="fa fa-check"></i><b>6.3.3</b> Otros gráficos</a></li>
</ul></li>
<li class="chapter" data-level="6.4" data-path="graficos-y-distribucion-del-ingreso.html"><a href="graficos-y-distribucion-del-ingreso.html#ejercicios"><i class="fa fa-check"></i><b>6.4</b> Ejercicios</a><ul>
<li class="chapter" data-level="6.4.1" data-path="graficos-y-distribucion-del-ingreso.html"><a href="graficos-y-distribucion-del-ingreso.html#para-practicar"><i class="fa fa-check"></i><b>6.4.1</b> Para practicar</a></li>
<li class="chapter" data-level="6.4.2" data-path="graficos-y-distribucion-del-ingreso.html"><a href="graficos-y-distribucion-del-ingreso.html#de-tarea"><i class="fa fa-check"></i><b>6.4.2</b> De tarea</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="7" data-path="pool-de-datos-en-panel-y-matrices-de-transicion.html"><a href="pool-de-datos-en-panel-y-matrices-de-transicion.html"><i class="fa fa-check"></i><b>7</b> Pool de Datos en Panel y Matrices de Transición</a><ul>
<li class="chapter" data-level="7.1" data-path="pool-de-datos-en-panel-y-matrices-de-transicion.html"><a href="pool-de-datos-en-panel-y-matrices-de-transicion.html#datos-de-panel"><i class="fa fa-check"></i><b>7.1</b> Datos De Panel</a><ul>
<li class="chapter" data-level="7.1.1" data-path="pool-de-datos-en-panel-y-matrices-de-transicion.html"><a href="pool-de-datos-en-panel-y-matrices-de-transicion.html#introduccion-1"><i class="fa fa-check"></i><b>7.1.1</b> Introducción</a></li>
<li class="chapter" data-level="7.1.2" data-path="pool-de-datos-en-panel-y-matrices-de-transicion.html"><a href="pool-de-datos-en-panel-y-matrices-de-transicion.html#pasos-para-la-construccion-del-panel"><i class="fa fa-check"></i><b>7.1.2</b> Pasos para la construccion del Panel</a></li>
</ul></li>
<li class="chapter" data-level="7.2" data-path="pool-de-datos-en-panel-y-matrices-de-transicion.html"><a href="pool-de-datos-en-panel-y-matrices-de-transicion.html#matrices-de-transicion"><i class="fa fa-check"></i><b>7.2</b> Matrices de transición</a><ul>
<li class="chapter" data-level="7.2.1" data-path="pool-de-datos-en-panel-y-matrices-de-transicion.html"><a href="pool-de-datos-en-panel-y-matrices-de-transicion.html#calculo-de-probabilidades-de-transicion."><i class="fa fa-check"></i><b>7.2.1</b> Calculo de probabilidades de transición.</a></li>
<li class="chapter" data-level="7.2.2" data-path="pool-de-datos-en-panel-y-matrices-de-transicion.html"><a href="pool-de-datos-en-panel-y-matrices-de-transicion.html#grafico-de-matriz-de-transicion"><i class="fa fa-check"></i><b>7.2.2</b> Gráfico de Matriz de Transición</a></li>
</ul></li>
<li class="chapter" data-level="7.3" data-path="tidyverse-y-tasas-basicas-del-mercado-de-trabajo.html"><a href="tidyverse-y-tasas-basicas-del-mercado-de-trabajo.html#ejercicios-para-practicar-1"><i class="fa fa-check"></i><b>7.3</b> Ejercicios Para prácticar</a></li>
</ul></li>
<li class="chapter" data-level="8" data-path="rmarkdown.html"><a href="rmarkdown.html"><i class="fa fa-check"></i><b>8</b> RMarkdown</a><ul>
<li class="chapter" data-level="8.1" data-path="rmarkdown.html"><a href="rmarkdown.html#introduccion-2"><i class="fa fa-check"></i><b>8.1</b> Introducción</a></li>
<li class="chapter" data-level="8.2" data-path="rmarkdown.html"><a href="rmarkdown.html#organizacion-de-los-datos"><i class="fa fa-check"></i><b>8.2</b> Organización de los datos</a></li>
<li class="chapter" data-level="8.3" data-path="rmarkdown.html"><a href="rmarkdown.html#tasas-basicas-de-mercado-de-trabajo"><i class="fa fa-check"></i><b>8.3</b> Tasas básicas de Mercado de trabajo</a></li>
<li class="chapter" data-level="8.4" data-path="rmarkdown.html"><a href="rmarkdown.html#empleo-no-registrado"><i class="fa fa-check"></i><b>8.4</b> Empleo no registrado</a></li>
<li class="chapter" data-level="8.5" data-path="rmarkdown.html"><a href="rmarkdown.html#brechas-de-ingresos"><i class="fa fa-check"></i><b>8.5</b> Brechas de ingresos</a><ul>
<li class="chapter" data-level="8.5.1" data-path="rmarkdown.html"><a href="rmarkdown.html#brecha-de-ingresos-totales-mensuales"><i class="fa fa-check"></i><b>8.5.1</b> Brecha de ingresos totales mensuales</a></li>
<li class="chapter" data-level="8.5.2" data-path="rmarkdown.html"><a href="rmarkdown.html#brecha-de-ingresos-mensuales-por-nivel-educativo"><i class="fa fa-check"></i><b>8.5.2</b> Brecha de ingresos mensuales por nivel educativo</a></li>
<li class="chapter" data-level="8.5.3" data-path="rmarkdown.html"><a href="rmarkdown.html#brecha-de-ingresos-mensuales-y-horarios-por-nivel-educativo"><i class="fa fa-check"></i><b>8.5.3</b> Brecha de ingresos mensuales y horarios por nivel educativo</a></li>
</ul></li>
<li class="chapter" data-level="8.6" data-path="rmarkdown.html"><a href="rmarkdown.html#horas-semanales-trabajadas"><i class="fa fa-check"></i><b>8.6</b> Horas semanales trabajadas</a></li>
</ul></li>
<li class="chapter" data-level="9" data-path="programacion-funcional.html"><a href="programacion-funcional.html"><i class="fa fa-check"></i><b>9</b> Programacion Funcional</a><ul>
<li class="chapter" data-level="9.1" data-path="programacion-funcional.html"><a href="programacion-funcional.html#loops"><i class="fa fa-check"></i><b>9.1</b> Loops</a></li>
<li class="chapter" data-level="9.2" data-path="programacion-funcional.html"><a href="programacion-funcional.html#estructuras-condicionales"><i class="fa fa-check"></i><b>9.2</b> Estructuras Condicionales</a><ul>
<li class="chapter" data-level="9.2.1" data-path="programacion-funcional.html"><a href="programacion-funcional.html#if"><i class="fa fa-check"></i><b>9.2.1</b> if</a></li>
<li class="chapter" data-level="9.2.2" data-path="programacion-funcional.html"><a href="programacion-funcional.html#ifelse"><i class="fa fa-check"></i><b>9.2.2</b> ifelse</a></li>
</ul></li>
<li class="chapter" data-level="9.3" data-path="programacion-funcional.html"><a href="programacion-funcional.html#funciones-1"><i class="fa fa-check"></i><b>9.3</b> Funciones</a></li>
<li class="chapter" data-level="9.4" data-path="programacion-funcional.html"><a href="programacion-funcional.html#purrr"><i class="fa fa-check"></i><b>9.4</b> PURRR</a><ul>
<li class="chapter" data-level="9.4.1" data-path="programacion-funcional.html"><a href="programacion-funcional.html#iterando-en-la-eph"><i class="fa fa-check"></i><b>9.4.1</b> Iterando en la EPH</a></li>
</ul></li>
<li class="chapter" data-level="9.5" data-path="programacion-funcional.html"><a href="programacion-funcional.html#ejemplo.-regresion-lineal"><i class="fa fa-check"></i><b>9.5</b> Ejemplo. Regresión lineal</a><ul>
<li class="chapter" data-level="9.5.1" data-path="programacion-funcional.html"><a href="programacion-funcional.html#loopeando"><i class="fa fa-check"></i><b>9.5.1</b> Loopeando</a></li>
<li class="chapter" data-level="9.5.2" data-path="programacion-funcional.html"><a href="programacion-funcional.html#usando-map"><i class="fa fa-check"></i><b>9.5.2</b> Usando MAP</a></li>
<li class="chapter" data-level="9.5.3" data-path="programacion-funcional.html"><a href="programacion-funcional.html#walk"><i class="fa fa-check"></i><b>9.5.3</b> Walk</a></li>
<li class="chapter" data-level="9.5.4" data-path="programacion-funcional.html"><a href="programacion-funcional.html#discusion."><i class="fa fa-check"></i><b>9.5.4</b> Discusión.</a></li>
</ul></li>
<li class="chapter" data-level="9.6" data-path="programacion-funcional.html"><a href="programacion-funcional.html#lectura-y-escritura-de-archivos-intermedia"><i class="fa fa-check"></i><b>9.6</b> Lectura y escritura de archivos intermedia</a><ul>
<li class="chapter" data-level="9.6.1" data-path="programacion-funcional.html"><a href="programacion-funcional.html#rdata"><i class="fa fa-check"></i><b>9.6.1</b> RData</a></li>
<li class="chapter" data-level="9.6.2" data-path="programacion-funcional.html"><a href="programacion-funcional.html#rds"><i class="fa fa-check"></i><b>9.6.2</b> RDS</a></li>
<li class="chapter" data-level="9.6.3" data-path="programacion-funcional.html"><a href="programacion-funcional.html#spss-stata-sas"><i class="fa fa-check"></i><b>9.6.3</b> SPSS, STATA, SAS</a></li>
<li class="chapter" data-level="9.6.4" data-path="programacion-funcional.html"><a href="programacion-funcional.html#encoding"><i class="fa fa-check"></i><b>9.6.4</b> Encoding</a></li>
</ul></li>
<li class="chapter" data-level="9.7" data-path="programacion-funcional.html"><a href="programacion-funcional.html#ayudas"><i class="fa fa-check"></i><b>9.7</b> Ayudas</a></li>
<li class="chapter" data-level="9.8" data-path="programacion-funcional.html"><a href="programacion-funcional.html#ejercicios-para-practicar-2"><i class="fa fa-check"></i><b>9.8</b> Ejercicios para practicar</a></li>
</ul></li>
</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Introducción a R para Ciencias Sociales. Aplicación practica en la EPH</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="tidyverse-y-tasas-basicas-del-mercado-de-trabajo" class="section level1">
<h1><span class="header-section-number">Capítulo 4</span> Tidyverse y Tasas básicas del Mercado de Trabajo</h1>
<blockquote>
<p>Reiniciar R</p>
</blockquote>
<div id="estructuracion-de-bases-de-datos" class="section level2">
<h2><span class="header-section-number">4.1</span> Estructuración de Bases de Datos</h2>
<p>A lo largo de esta clase, trabajaremos con el paquete <a href="https://www.tidyverse.org/">Tidyverse</a>. El mismo agrupa una serie de paquetes que tienen una misma lógica en su diseño y por ende funcionan en armonía.<br />
Entre ellos usaremos principalmente <strong>dplyr</strong> y <strong>tidyr</strong> para realizar transformaciones sobre nuestro set de datos, y <strong>ggplot</strong> para realizar gráficos (éste último se verá en la clase 3).</p>
<p>A continuación cargamos la librería a nuestro ambiente. Para ello debe estar previamente instalada en nuestra pc.</p>
<pre class="sourceCode r"><code class="sourceCode r"><span class="kw">library</span>(tidyverse)</code></pre>
<p>Para mostrar el funcionamiento básico de tydyverse, crearemos un pequeño set de datos del <a href="http://www.indec.gob.ar/bajarCuadroEstadistico.asp?idc=4020B33440609462654542BD0BC320F1523DA0DC52C396201DB4DD5861FFEDC9AD1436681AC84179">Indice de salarios</a>.</p>
<pre class="sourceCode r"><code class="sourceCode r">INDICE  &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="dv">100</span>,   <span class="dv">100</span>,   <span class="dv">100</span>,
             <span class="fl">101.8</span>, <span class="fl">101.2</span>, <span class="fl">100.73</span>,
             <span class="fl">102.9</span>, <span class="fl">102.4</span>, <span class="fl">103.2</span>)

FECHA  &lt;-<span class="st">  </span><span class="kw">c</span>(<span class="st">&quot;Oct-16&quot;</span>, <span class="st">&quot;Oct-16&quot;</span>, <span class="st">&quot;Oct-16&quot;</span>,
             <span class="st">&quot;Nov-16&quot;</span>, <span class="st">&quot;Nov-16&quot;</span>, <span class="st">&quot;Nov-16&quot;</span>,
             <span class="st">&quot;Dic-16&quot;</span>, <span class="st">&quot;Dic-16&quot;</span>, <span class="st">&quot;Dic-16&quot;</span>)


GRUPO  &lt;-<span class="st">  </span><span class="kw">c</span>(<span class="st">&quot;Privado_Registrado&quot;</span>,<span class="st">&quot;Público&quot;,&quot;</span>Privado_No_Registrado<span class="st">&quot;,</span>
<span class="st">             &quot;</span>Privado_Registrado<span class="st">&quot;,&quot;</span>Público&quot;,<span class="st">&quot;Privado_No_Registrado&quot;</span>,
             <span class="st">&quot;Privado_Registrado&quot;</span>,<span class="st">&quot;Público&quot;,&quot;</span>Privado_No_Registrado<span class="st">&quot;)</span>

<span class="st">Datos &lt;- data.frame(INDICE, FECHA, GRUPO)</span></code></pre>
</div>
<div id="dplyr" class="section level2">
<h2><span class="header-section-number">4.2</span> Dplyr</h2>
<p>El caracter principal para utilizar este paquete es <code>%&gt;%</code> , <em>pipe</em> (de tubería).</p>
<p>Los <code>%&gt;%</code> toman el set de datos a su izquierda, y los transforman mediante los comandos a su derecha, en los cuales los elementos de la izquierda están implícitos. Es decír, que una vez específicado el DataFrame con el cual se trabaja, no será necesario nombrarlo nuevamente para referirse a una determinada variable/columna del mismo.</p>
<p>Veamos las principales funciones que pueden utilizarse con la lógica de este paquete:</p>
<div id="filter" class="section level3">
<h3><span class="header-section-number">4.2.1</span> filter</h3>
<p>Permite filtrar la tabla acorde al cumplimiento de condiciones lógicas</p>
<pre class="sourceCode r"><code class="sourceCode r">Datos <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">  </span><span class="kw">filter</span>(INDICE<span class="op">&gt;</span><span class="dv">101</span> , GRUPO <span class="op">==</span><span class="st"> &quot;Privado_Registrado&quot;</span>)</code></pre>
<pre><code>##   INDICE  FECHA              GRUPO
## 1  101.8 Nov-16 Privado_Registrado
## 2  102.9 Dic-16 Privado_Registrado</code></pre>
<p>Nótese que en este caso al separar con una <code>,</code> las condiciones se exige el cumplimiento de ambas. En caso de desear que se cumpla una sola condición debe utilizarse el caracter <code>|</code></p>
<pre class="sourceCode r"><code class="sourceCode r">Datos <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">  </span><span class="kw">filter</span>(INDICE<span class="op">&gt;</span><span class="dv">101</span> <span class="op">|</span><span class="st"> </span>GRUPO <span class="op">==</span><span class="st"> &quot;Privado_Registrado&quot;</span>)</code></pre>
<pre><code>##   INDICE  FECHA                 GRUPO
## 1  100.0 Oct-16    Privado_Registrado
## 2  101.8 Nov-16    Privado_Registrado
## 3  101.2 Nov-16               Público
## 4  102.9 Dic-16    Privado_Registrado
## 5  102.4 Dic-16               Público
## 6  103.2 Dic-16 Privado_No_Registrado</code></pre>
</div>
<div id="rename" class="section level3">
<h3><span class="header-section-number">4.2.2</span> rename</h3>
<p>Permite renombrar una columna de la tabla. Funciona de la siguiente manera:
<code>Data %&gt;% rename( nuevo_nombre = viejo_nombre )</code></p>
<pre class="sourceCode r"><code class="sourceCode r">Datos <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">  </span><span class="kw">rename</span>(<span class="dt">Periodo =</span> FECHA)</code></pre>
<pre><code>##   INDICE Periodo                 GRUPO
## 1 100.00  Oct-16    Privado_Registrado
## 2 100.00  Oct-16               Público
## 3 100.00  Oct-16 Privado_No_Registrado
## 4 101.80  Nov-16    Privado_Registrado
## 5 101.20  Nov-16               Público
## 6 100.73  Nov-16 Privado_No_Registrado
## 7 102.90  Dic-16    Privado_Registrado
## 8 102.40  Dic-16               Público
## 9 103.20  Dic-16 Privado_No_Registrado</code></pre>
<p>Nótese que a diferencia del ejemplo de la función <strong>filter</strong> donde utilizábamos <strong>==</strong> para comprobar una condición lógica, en este caso se utiliza sólo un <strong>=</strong> ya que lo estamos haciendo es <em>asignar</em> un nombre.</p>
</div>
<div id="mutate" class="section level3">
<h3><span class="header-section-number">4.2.3</span> mutate</h3>
<p>Permite agregar una variable a la tabla (especificando el nombre que tomará esta), que puede ser el resultado de operaciones sobre otras variables de la misma tabla.</p>
<p>En caso de especificar el nombre de una columna existente, el resultado de la operación realizada “sobrescribirá” la información de la columna con dicho nombre</p>
<pre class="sourceCode r"><code class="sourceCode r">Datos &lt;-<span class="st"> </span>Datos <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">  </span><span class="kw">mutate</span>(<span class="dt">Doble=</span>INDICE<span class="op">*</span><span class="dv">2</span>)
Datos</code></pre>
<pre><code>##   INDICE  FECHA                 GRUPO  Doble
## 1 100.00 Oct-16    Privado_Registrado 200.00
## 2 100.00 Oct-16               Público 200.00
## 3 100.00 Oct-16 Privado_No_Registrado 200.00
## 4 101.80 Nov-16    Privado_Registrado 203.60
## 5 101.20 Nov-16               Público 202.40
## 6 100.73 Nov-16 Privado_No_Registrado 201.46
## 7 102.90 Dic-16    Privado_Registrado 205.80
## 8 102.40 Dic-16               Público 204.80
## 9 103.20 Dic-16 Privado_No_Registrado 206.40</code></pre>
</div>
<div id="case_when" class="section level3">
<h3><span class="header-section-number">4.2.4</span> case_when</h3>
<p>Permite definir una variable, la cual toma un valor particular para cada condición establecida. En caso de no cumplir ninguna de las condiciones establecidas la variable tomara valor <strong>NA</strong>.<br />
Su funcionamiento es el siguiente:<br />
<code>case_when(condicion1 ~ &quot;Valor1&quot;,condicion2 ~ &quot;Valor2&quot;,condicion3 ~ &quot;Valor3&quot;)</code></p>
<pre class="sourceCode r"><code class="sourceCode r">Datos &lt;-<span class="st"> </span>Datos <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">  </span><span class="kw">mutate</span>(<span class="dt">Caso_cuando =</span> <span class="kw">case_when</span>(GRUPO <span class="op">==</span><span class="st"> &quot;Privado_Registrado&quot;</span>   <span class="op">~</span><span class="st"> </span>INDICE<span class="op">*</span><span class="dv">2</span>,
                                 GRUPO <span class="op">==</span><span class="st"> &quot;Público&quot;              ~ INDICE*3,</span>
<span class="st">                                 GRUPO == &quot;</span>Privado_No_Registrado<span class="st">&quot;~ INDICE*5))</span>
<span class="st">Datos</span></code></pre>
<pre><code>##   INDICE  FECHA                 GRUPO  Doble Caso_cuando
## 1 100.00 Oct-16    Privado_Registrado 200.00      200.00
## 2 100.00 Oct-16               Público 200.00      300.00
## 3 100.00 Oct-16 Privado_No_Registrado 200.00      500.00
## 4 101.80 Nov-16    Privado_Registrado 203.60      203.60
## 5 101.20 Nov-16               Público 202.40      303.60
## 6 100.73 Nov-16 Privado_No_Registrado 201.46      503.65
## 7 102.90 Dic-16    Privado_Registrado 205.80      205.80
## 8 102.40 Dic-16               Público 204.80      307.20
## 9 103.20 Dic-16 Privado_No_Registrado 206.40      516.00</code></pre>
</div>
<div id="select" class="section level3">
<h3><span class="header-section-number">4.2.5</span> select</h3>
<p>Permite especificar la serie de columnas que se desea conservar de un DataFrame. También pueden especificarse las columnas que se desean descartar (agregándoles un <em>-</em>). Muy útil para agilizar el trabajo en bases de datos de gran tamaño.</p>
<pre class="sourceCode r"><code class="sourceCode r">Datos2 &lt;-<span class="st"> </span>Datos <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">  </span><span class="kw">select</span>(INDICE, FECHA, GRUPO)
Datos2</code></pre>
<pre><code>##   INDICE  FECHA                 GRUPO
## 1 100.00 Oct-16    Privado_Registrado
## 2 100.00 Oct-16               Público
## 3 100.00 Oct-16 Privado_No_Registrado
## 4 101.80 Nov-16    Privado_Registrado
## 5 101.20 Nov-16               Público
## 6 100.73 Nov-16 Privado_No_Registrado
## 7 102.90 Dic-16    Privado_Registrado
## 8 102.40 Dic-16               Público
## 9 103.20 Dic-16 Privado_No_Registrado</code></pre>
<pre class="sourceCode r"><code class="sourceCode r">Datos &lt;-<span class="st"> </span>Datos <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">  </span><span class="kw">select</span>(<span class="op">-</span><span class="kw">c</span>(Doble,Caso_cuando))
Datos</code></pre>
<pre><code>##   INDICE  FECHA                 GRUPO
## 1 100.00 Oct-16    Privado_Registrado
## 2 100.00 Oct-16               Público
## 3 100.00 Oct-16 Privado_No_Registrado
## 4 101.80 Nov-16    Privado_Registrado
## 5 101.20 Nov-16               Público
## 6 100.73 Nov-16 Privado_No_Registrado
## 7 102.90 Dic-16    Privado_Registrado
## 8 102.40 Dic-16               Público
## 9 103.20 Dic-16 Privado_No_Registrado</code></pre>
</div>
<div id="arrange" class="section level3">
<h3><span class="header-section-number">4.2.6</span> arrange</h3>
<p>Permite ordenar la tabla por los valores de determinada/s variable/s. Es útil cuando luego deben hacerse otras operaciones que requieran del ordenamiento de la tabla</p>
<pre class="sourceCode r"><code class="sourceCode r">Datos &lt;-<span class="st"> </span>Datos <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">  </span><span class="kw">arrange</span>(GRUPO, INDICE)
Datos</code></pre>
<pre><code>##   INDICE  FECHA                 GRUPO
## 1 100.00 Oct-16 Privado_No_Registrado
## 2 100.73 Nov-16 Privado_No_Registrado
## 3 103.20 Dic-16 Privado_No_Registrado
## 4 100.00 Oct-16    Privado_Registrado
## 5 101.80 Nov-16    Privado_Registrado
## 6 102.90 Dic-16    Privado_Registrado
## 7 100.00 Oct-16               Público
## 8 101.20 Nov-16               Público
## 9 102.40 Dic-16               Público</code></pre>
</div>
<div id="summarise" class="section level3">
<h3><span class="header-section-number">4.2.7</span> summarise</h3>
<p>Crea una nueva tabla que resume la información original. Para ello, definimos las variables de resumen y las formas de agregación.</p>
<pre class="sourceCode r"><code class="sourceCode r">Datos <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">  </span><span class="kw">summarise</span>(<span class="dt">Indprom =</span> <span class="kw">mean</span>(INDICE))</code></pre>
<pre><code>##    Indprom
## 1 101.3589</code></pre>
</div>
<div id="group_by" class="section level3">
<h3><span class="header-section-number">4.2.8</span> group_by</h3>
<p>Esta función permite realizar operaciones de forma agrupada. Lo que hace la función es “separar” a la tabla según los valores de la variable indicada y realizar las operaciones que se especifican a continuación, de manera independiente para cada una de las “subtablas”. En nuestro ejemplo, sería útil para calcular el promedio de los indices por <em>Fecha</em></p>
<pre class="sourceCode r"><code class="sourceCode r">Datos <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">  </span><span class="kw">group_by</span>(FECHA) <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">summarise</span>(<span class="dt">Indprom =</span> <span class="kw">mean</span>(INDICE))</code></pre>
<pre><code>## # A tibble: 3 x 2
##   FECHA  Indprom
##   &lt;fct&gt;    &lt;dbl&gt;
## 1 Dic-16    103.
## 2 Nov-16    101.
## 3 Oct-16    100</code></pre>
<p>Notese que los <code>%&gt;%</code> pueden usarse encadenados para realizar numerosos procedimientos sobre un dataframe original.
Veamos un ejemplo con multiples encadenamietnos</p>
<pre class="sourceCode r"><code class="sourceCode r">Encadenado &lt;-<span class="st"> </span>Datos <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">  </span><span class="kw">filter</span>(GRUPO <span class="op">==</span><span class="st"> &quot;Privado_Registrado&quot;</span>) <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">  </span><span class="kw">rename</span>(<span class="dt">Periodo =</span> FECHA) <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">  </span><span class="kw">mutate</span>(<span class="dt">Doble =</span> INDICE<span class="op">*</span><span class="dv">2</span>) <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">  </span><span class="kw">select</span>(<span class="op">-</span>INDICE)</code></pre>
</div>
</div>
<div id="joins" class="section level2">
<h2><span class="header-section-number">4.3</span> Joins</h2>
<p>Otra implementación muy importante del paquete dplyr son las funciones para unir tablas (joins)</p>
<div class="figure">
<img src="img/joins.png" alt="fuente: http://rstudio-pubs-static.s3.amazonaws.com/227171_618ebdce0b9d44f3af65700e833593db.html" />
<p class="caption">fuente: <a href="http://rstudio-pubs-static.s3.amazonaws.com/227171_618ebdce0b9d44f3af65700e833593db.html" class="uri">http://rstudio-pubs-static.s3.amazonaws.com/227171_618ebdce0b9d44f3af65700e833593db.html</a></p>
</div>
<div id="left_join" class="section level3">
<h3><span class="header-section-number">4.3.1</span> left_join</h3>
<p>Veamos un ejemplo de la función <strong>left_join</strong> (una de las más utilizadas en la práctica).<br />
Para ello crearemos previamente un Dataframe que contenga un Ponderador para cada uno de los Grupos del Dataframe <em>Datos</em>. Aprovecharemos el ejemplo para introducir la función <strong>weigthed.mean</strong>, y así calcular un Indice Ponderado.</p>
<pre class="sourceCode r"><code class="sourceCode r">Ponderadores &lt;-<span class="st"> </span><span class="kw">data.frame</span>(<span class="dt">GRUPO =</span> <span class="kw">c</span>(<span class="st">&quot;Privado_Registrado&quot;</span>,<span class="st">&quot;Público&quot;,&quot;</span>Privado_No_Registrado<span class="st">&quot;),</span>
<span class="st">                            PONDERADOR = c(50.16,29.91,19.93))</span>
<span class="st">Ponderadores</span></code></pre>
<pre><code>##                   GRUPO PONDERADOR
## 1    Privado_Registrado      50.16
## 2               Público      29.91
## 3 Privado_No_Registrado      19.93</code></pre>
<pre class="sourceCode r"><code class="sourceCode r">Datos_join &lt;-<span class="st"> </span>Datos <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">  </span><span class="kw">left_join</span>(.,Ponderadores, <span class="dt">by =</span> <span class="st">&quot;GRUPO&quot;</span>)
Datos_join</code></pre>
<pre><code>##   INDICE  FECHA                 GRUPO PONDERADOR
## 1 100.00 Oct-16 Privado_No_Registrado      19.93
## 2 100.73 Nov-16 Privado_No_Registrado      19.93
## 3 103.20 Dic-16 Privado_No_Registrado      19.93
## 4 100.00 Oct-16    Privado_Registrado      50.16
## 5 101.80 Nov-16    Privado_Registrado      50.16
## 6 102.90 Dic-16    Privado_Registrado      50.16
## 7 100.00 Oct-16               Público      29.91
## 8 101.20 Nov-16               Público      29.91
## 9 102.40 Dic-16               Público      29.91</code></pre>
<pre class="sourceCode r"><code class="sourceCode r">Datos_Indice_Gral &lt;-<span class="st"> </span>Datos_join <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">  </span><span class="kw">group_by</span>(FECHA) <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">  </span><span class="kw">summarise</span>(<span class="dt">Indice_Gral =</span> <span class="kw">weighted.mean</span>(INDICE,<span class="dt">w =</span> PONDERADOR))

Datos_Indice_Gral</code></pre>
<pre><code>## # A tibble: 3 x 2
##   FECHA  Indice_Gral
##   &lt;fct&gt;        &lt;dbl&gt;
## 1 Dic-16        103.
## 2 Nov-16        101.
## 3 Oct-16        100</code></pre>
</div>
</div>
<div id="tidyr" class="section level2">
<h2><span class="header-section-number">4.4</span> Tidyr</h2>
<p>El paquete tidyr esta pensado para facilitar el emprolijamiento de los datos.</p>
<p><strong>Gather</strong> es una función que nos permite pasar los datos de forma horizontal a una forma vertical.</p>
<p><strong>spread</strong> es una función que nos permite pasar los datos de forma vertical a una forma horizontal.</p>
<div class="figure">
<img src="img/spreadVSgather.png" alt="fuente: http://www.gis-blog.com/data-management-with-r-tidyr-part-1/" />
<p class="caption">fuente: <a href="http://www.gis-blog.com/data-management-with-r-tidyr-part-1/" class="uri">http://www.gis-blog.com/data-management-with-r-tidyr-part-1/</a></p>
</div>
<p>Retomemos el Dataframe original para mostrar como operan estas funciones:</p>
<pre class="sourceCode r"><code class="sourceCode r">Datos</code></pre>
<pre><code>##   INDICE  FECHA                 GRUPO
## 1 100.00 Oct-16 Privado_No_Registrado
## 2 100.73 Nov-16 Privado_No_Registrado
## 3 103.20 Dic-16 Privado_No_Registrado
## 4 100.00 Oct-16    Privado_Registrado
## 5 101.80 Nov-16    Privado_Registrado
## 6 102.90 Dic-16    Privado_Registrado
## 7 100.00 Oct-16               Público
## 8 101.20 Nov-16               Público
## 9 102.40 Dic-16               Público</code></pre>
<div id="gather-y-spread" class="section level3">
<h3><span class="header-section-number">4.4.1</span> Gather y Spread</h3>
<pre class="sourceCode r"><code class="sourceCode r">Datos_Spread &lt;-<span class="st"> </span>Datos <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">  </span><span class="kw">spread</span>(.,       <span class="co"># el . llama a lo que esta atras del %&gt;% </span>
  <span class="dt">key =</span> GRUPO,    <span class="co">#la llave es la variable cuyos valores van a dar los nombres de columnas</span>
  <span class="dt">value =</span> INDICE) <span class="co">#los valores con que se llenan las celdas</span>

Datos_Spread  </code></pre>
<pre><code>##    FECHA Privado_No_Registrado Privado_Registrado Público
## 1 Dic-16                103.20              102.9   102.4
## 2 Nov-16                100.73              101.8   101.2
## 3 Oct-16                100.00              100.0   100.0</code></pre>
<pre class="sourceCode r"><code class="sourceCode r"><span class="co">##La función opuesta (gather) nos permite obtener un dataframe como el original partiendo de un dataframe como el recién construido.</span>
  
Datos_gather &lt;-<span class="st"> </span>Datos_Spread <span class="op">%&gt;%</span><span class="st">  </span>
<span class="st">  </span><span class="kw">gather</span>(.,         <span class="co"># el . llama a lo que esta atras del %&gt;% </span>
   <span class="dt">key   =</span> GRUPO,   <span class="co"># como se llamará la variable que toma los nombres de las columnas </span>
   <span class="dt">value =</span> INDICE,  <span class="co"># como se llamará la variable que toma los valores de las columnas</span>
   <span class="dv">2</span><span class="op">:</span><span class="dv">4</span>)             <span class="co">#le indico que columnas juntar</span>

Datos_gather</code></pre>
<pre><code>##    FECHA                 GRUPO INDICE
## 1 Dic-16 Privado_No_Registrado 103.20
## 2 Nov-16 Privado_No_Registrado 100.73
## 3 Oct-16 Privado_No_Registrado 100.00
## 4 Dic-16    Privado_Registrado 102.90
## 5 Nov-16    Privado_Registrado 101.80
## 6 Oct-16    Privado_Registrado 100.00
## 7 Dic-16               Público 102.40
## 8 Nov-16               Público 101.20
## 9 Oct-16               Público 100.00</code></pre>
</div>
</div>
<div id="tasas-del-mercado-de-trabajo" class="section level2">
<h2><span class="header-section-number">4.5</span> Tasas del Mercado de Trabajo</h2>
<p>Luego de abordar las principales funciones necesarias para operar sobre las bases de datos, trabajaremos a continuación con la base del 1er Trimestre de 2017 de la EPH. El ejercicio principal consistirá en calcular la <strong>tasa de empleo</strong>, definida como:</p>
<ul>
<li>Tasa de empleo: <span class="math inline">\(\frac{Ocupados}{Población}\)</span></li>
</ul>
<p>Una vez alcanzado dicho resultado, se extenderá el ejercicio hacia el <strong>conjunto de tasas básicas</strong> presentadas en los Cuadros 1.1 y 1.2, del <a href="http://www.indec.gob.ar/uploads/informesdeprensa/EPH_cont_1trim17.pdf">Informe técnico elaborado por EPH-INDEC</a>. Por último se realizará una modificación para calcular al mismo tiempo las tasas básicas de <strong>2 trimestres consecutivos</strong>.</p>
<p>En la carpeta de <em>FUENTES</em> del curso, se encuentra el archivo <em>“EPH_Registro”</em> que contiene las codificación de cada una de las variables de la base, y el archivo <em>“EPH_Concpetos_Actividad”</em> que contiene las definiciones de los Estados ocupacionales a partir de los cuales se construyen las tasas básicas.</p>
<p>Cargamos la librería que usaremos para leer y escribir archivos en excel.</p>
<pre class="sourceCode r"><code class="sourceCode r"><span class="kw">library</span>(openxlsx) </code></pre>
<p><em>Carga de Informacion</em></p>
<p>La función <strong>list.files</strong> nos permite observar los archivos que contiene una determinada carpeta</p>
<pre class="sourceCode r"><code class="sourceCode r"><span class="kw">list.files</span>(<span class="st">&quot;../Fuentes/&quot;</span>)</code></pre>
<pre><code>## character(0)</code></pre>
<p>La función <strong>read.table</strong> nos permite levantar los archivos de extensión “.txt”<br />
La función <strong>read.xlsx</strong> nos permite levantar los archivos de extensión “.xlsx”</p>
<p>Levantamos la base individual del primer trimestre de 2017, y un listado que contiene los Nombres y Códigos de los Aglomerados EPH.</p>
<pre class="sourceCode r"><code class="sourceCode r">Individual_t117 &lt;-
<span class="st">  </span><span class="kw">read.table</span>(<span class="st">&quot;Fuentes/usu_individual_t117.txt&quot;</span>,
  <span class="dt">sep =</span> <span class="st">&quot;;&quot;</span>,
  <span class="dt">dec =</span> <span class="st">&quot;,&quot;</span>,
  <span class="dt">header =</span> <span class="ot">TRUE</span>,
  <span class="dt">fill =</span> <span class="ot">TRUE</span> )
  
  
Aglom &lt;-<span class="st"> </span><span class="kw">read.xlsx</span>(<span class="st">&quot;Fuentes/Aglomerados EPH.xlsx&quot;</span>)</code></pre>
<div id="tasa-de-empleo" class="section level3">
<h3><span class="header-section-number">4.5.1</span> Tasa de Empleo</h3>
<p>Creamos una tabla con los niveles de:</p>
<ul>
<li>Población</li>
<li>Ocupados</li>
</ul>
<p>Estos niveles nos van a permitir calcular la tasa de forma sencilla.</p>
<ul>
<li>Población: Si contaramos cuantos registros tiene la base, simplemente tendríamos el numero de individuos muestral de la EPH, por ende debemos <strong>sumar los valores de la variable PONDERA</strong>, para contemplar a cuantas personas representa cada individuo encuestado.</li>
<li>Ocupados: En este caso, debemos agregar un <strong>filtro</strong> al procedimiento anterior, ya que unicamente queremos sumar los ponderadores de aquellas personas que se encuentran ocupadas. (La lógica seria: “Suma los valores de la columna PONDERA, solo para aquellos registros donde el ESTADO == 1”)</li>
</ul>
<pre class="sourceCode r"><code class="sourceCode r">Poblacion_ocupados &lt;-<span class="st"> </span>Individual_t117 <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">  </span><span class="kw">summarise</span>(<span class="dt">Poblacion         =</span> <span class="kw">sum</span>(PONDERA),
            <span class="dt">Ocupados          =</span> <span class="kw">sum</span>(PONDERA[ESTADO <span class="op">==</span><span class="st"> </span><span class="dv">1</span>]))

Poblacion_ocupados</code></pre>
<pre><code>##   Poblacion Ocupados
## 1  27416497 11328384</code></pre>
<p>La función <code>summarise()</code> nos permite crear multiples variables de resumen al mismo tiempo, simplemente separando con una <code>,</code> cada uno de ellas. A su vez, se pueden crear variables, a partir de las variables creadas por la propia función. De esta forma, podemos, directamente calcular la <strong>tasa de empleo</strong> a partir del total poblacional y de ocupados.</p>
<pre class="sourceCode r"><code class="sourceCode r">Empleo &lt;-<span class="st"> </span>Individual_t117 <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">  </span><span class="kw">summarise</span>(<span class="dt">Poblacion         =</span> <span class="kw">sum</span>(PONDERA),
            <span class="dt">Ocupados          =</span> <span class="kw">sum</span>(PONDERA[ESTADO <span class="op">==</span><span class="st"> </span><span class="dv">1</span>]),
            <span class="dt">Tasa_Empleo    =</span> Ocupados<span class="op">/</span>Poblacion)

Empleo</code></pre>
<pre><code>##   Poblacion Ocupados Tasa_Empleo
## 1  27416497 11328384   0.4131959</code></pre>
<p>Una vez calculada la tasa, incluso podríamos desechar las variables de nivel, para conservar unicamente la tasas</p>
<pre class="sourceCode r"><code class="sourceCode r">Empleo <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">  </span><span class="kw">select</span>(<span class="op">-</span>(<span class="dv">1</span><span class="op">:</span><span class="dv">2</span>))</code></pre>
<pre><code>##   Tasa_Empleo
## 1   0.4131959</code></pre>
</div>
<div id="tasas-basicas---total-aglomerados" class="section level3">
<h3><span class="header-section-number">4.5.2</span> Tásas Básicas - Total Aglomerados</h3>
<p>Con la misma lógica del ejemplo anterior, podemos construir con solo una porción de código adicional el Cuadro 1.1 del <a href="http://www.indec.gob.ar/uploads/informesdeprensa/EPH_cont_1trim17.pdf">Informe técnico de Mercado de trabajo EPH-INDEC</a>.</p>
<pre class="sourceCode r"><code class="sourceCode r"><span class="co">####Cuadro 1.1 Principales indicadores. Total 31 aglomerados u</span>

Cuadro_<span class="fl">1.1</span>a &lt;-<span class="st"> </span>Individual_t117 <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">  </span><span class="kw">summarise</span>(<span class="dt">Poblacion         =</span> <span class="kw">sum</span>(PONDERA),
            <span class="dt">Ocupados          =</span> <span class="kw">sum</span>(PONDERA[ESTADO <span class="op">==</span><span class="st"> </span><span class="dv">1</span>]),
            <span class="dt">Desocupados       =</span> <span class="kw">sum</span>(PONDERA[ESTADO <span class="op">==</span><span class="st"> </span><span class="dv">2</span>]),
            <span class="dt">PEA               =</span> Ocupados <span class="op">+</span><span class="st"> </span>Desocupados,
            <span class="dt">Ocupados_demand   =</span> <span class="kw">sum</span>(PONDERA[ESTADO <span class="op">==</span><span class="st"> </span><span class="dv">1</span> <span class="op">&amp;</span><span class="st"> </span>PP03J <span class="op">==</span><span class="dv">1</span>]),
            <span class="dt">Suboc_demandante  =</span> <span class="kw">sum</span>(PONDERA[ESTADO <span class="op">==</span><span class="st"> </span><span class="dv">1</span> <span class="op">&amp;</span><span class="st"> </span>INTENSI <span class="op">==</span><span class="dv">1</span> <span class="op">&amp;</span><span class="st"> </span>PP03J<span class="op">==</span><span class="dv">1</span>]),
            <span class="dt">Suboc_no_demand   =</span> <span class="kw">sum</span>(PONDERA[ESTADO <span class="op">==</span><span class="st"> </span><span class="dv">1</span> <span class="op">&amp;</span><span class="st"> </span>INTENSI <span class="op">==</span><span class="dv">1</span> <span class="op">&amp;</span><span class="st"> </span>PP03J <span class="op">%in%</span><span class="st"> </span><span class="kw">c</span>(<span class="dv">2</span>,<span class="dv">9</span>)]),
            <span class="dt">Subocupados       =</span> Suboc_demandante <span class="op">+</span><span class="st"> </span>Suboc_no_demand ,
<span class="co"># También podemos llamar a las variables entre comillas, incluyendo nombres compuestos</span>
<span class="co"># A su vez, podemos utilizar la variable recién creada en la definción de otra varible</span>
            <span class="st">&#39;Tasa Actividad&#39;</span>                  =<span class="st"> </span>PEA<span class="op">/</span>Poblacion,
            <span class="st">&#39;Tasa Empleo&#39;</span>                     =<span class="st"> </span>Ocupados<span class="op">/</span>Poblacion,
            <span class="st">&#39;Tasa Desocupacion&#39;</span>               =<span class="st"> </span>Desocupados<span class="op">/</span>PEA,
            <span class="st">&#39;Tasa ocupados demandantes&#39;</span>       =<span class="st"> </span>Ocupados_demand<span class="op">/</span>PEA,
            <span class="st">&#39;Tasa Subocupación&#39;               = Subocupados/PEA,</span>
<span class="st">            &#39;</span>Tasa Subocupación demandante<span class="st">&#39;    = Suboc_demandante/PEA,</span>
<span class="st">            &#39;</span>Tasa Subocupación no demandante<span class="st">&#39; = Suboc_no_demand/PEA) </span>
<span class="st">Cuadro_1.1a </span></code></pre>
<pre><code>##   Poblacion Ocupados Desocupados      PEA Ocupados_demand Suboc_demandante
## 1  27416497 11328384     1149128 12477512         1757938           829323
##   Suboc_no_demand Subocupados Tasa Actividad Tasa Empleo Tasa Desocupacion
## 1          410709     1240032      0.4551096   0.4131959        0.09209592
##   Tasa ocupados demandantes Tasa Subocupación Tasa Subocupación demandante
## 1                 0.1408885        0.09938135                   0.06646541
##   Tasa Subocupación no demandante
## 1                      0.03291594</code></pre>
<p>Una vez que calculamos las tasas, podemos borrar los niveles poblacionales con un <strong>select</strong></p>
<pre class="sourceCode r"><code class="sourceCode r">Cuadro_<span class="fl">1.1</span>a &lt;-<span class="st"> </span>Cuadro_<span class="fl">1.1</span>a <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">  </span><span class="kw">select</span>(<span class="op">-</span><span class="kw">c</span>(<span class="dv">1</span><span class="op">:</span><span class="dv">8</span>))

Cuadro_<span class="fl">1.1</span>a</code></pre>
<pre><code>##   Tasa Actividad Tasa Empleo Tasa Desocupacion Tasa ocupados demandantes
## 1      0.4551096   0.4131959        0.09209592                 0.1408885
##   Tasa Subocupación Tasa Subocupación demandante
## 1        0.09938135                   0.06646541
##   Tasa Subocupación no demandante
## 1                      0.03291594</code></pre>
<p>Con <strong>gather</strong> podemos dar vuelta la tabla para que quede como en la publicación</p>
<pre class="sourceCode r"><code class="sourceCode r">Cuadro_<span class="fl">1.1</span>a &lt;-<span class="st"> </span>Cuadro_<span class="fl">1.1</span>a <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">  </span><span class="kw">gather</span>(Tasas, Valor, <span class="dv">1</span><span class="op">:</span><span class="kw">ncol</span>(.))


Cuadro_<span class="fl">1.1</span>a</code></pre>
<pre><code>##                             Tasas      Valor
## 1                  Tasa Actividad 0.45510964
## 2                     Tasa Empleo 0.41319589
## 3               Tasa Desocupacion 0.09209592
## 4       Tasa ocupados demandantes 0.14088850
## 5               Tasa Subocupación 0.09938135
## 6    Tasa Subocupación demandante 0.06646541
## 7 Tasa Subocupación no demandante 0.03291594</code></pre>
<p>En caso de querer expresar los resultados como porcentajes, utilizamos la función <strong>sprintf</strong>. Para ello debemos utilizar <strong>mutate</strong> para transformar la columna Valor.</p>
<pre class="sourceCode r"><code class="sourceCode r">Cuadro_<span class="fl">1.1</span>a &lt;-<span class="st"> </span>Cuadro_<span class="fl">1.1</span>a <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">  </span><span class="kw">mutate</span>(<span class="dt">Valor =</span> <span class="kw">sprintf</span>(<span class="st">&quot;%1.1f%%&quot;</span>, <span class="dv">100</span><span class="op">*</span>Valor))

Cuadro_<span class="fl">1.1</span>a</code></pre>
<pre><code>##                             Tasas Valor
## 1                  Tasa Actividad 45.5%
## 2                     Tasa Empleo 41.3%
## 3               Tasa Desocupacion  9.2%
## 4       Tasa ocupados demandantes 14.1%
## 5               Tasa Subocupación  9.9%
## 6    Tasa Subocupación demandante  6.6%
## 7 Tasa Subocupación no demandante  3.3%</code></pre>
<p>Nótese que en este caso, para poder añadir el %, la función transforma a la variable en un Character, por ende debe tenerse en cuenta que se pierde la información del numero completo.</p>
</div>
<div id="tasas-basicas-por-aglomerado" class="section level3">
<h3><span class="header-section-number">4.5.3</span> Tásas Básicas por Aglomerado</h3>
<p>En este caso, podemos ver que simplemente agregando la función <strong>group_by</strong> podemos replicar el procedimiento para cada uno de los aglomerados. Y a su vez, podemos realizar en un solo paso los arreglos posteriores sobre nuestra tabla.</p>
<pre class="sourceCode r"><code class="sourceCode r">Cuadro_<span class="fl">1.2</span>a &lt;-<span class="st"> </span>Individual_t117 <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">  </span><span class="kw">group_by</span>(AGLOMERADO) <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">  </span><span class="kw">summarise</span>(<span class="dt">Poblacion         =</span> <span class="kw">sum</span>(PONDERA),
            <span class="dt">Ocupados          =</span> <span class="kw">sum</span>(PONDERA[ESTADO <span class="op">==</span><span class="st"> </span><span class="dv">1</span>]),
            <span class="dt">Desocupados       =</span> <span class="kw">sum</span>(PONDERA[ESTADO <span class="op">==</span><span class="st"> </span><span class="dv">2</span>]),
            <span class="dt">PEA               =</span> Ocupados <span class="op">+</span><span class="st"> </span>Desocupados,
            <span class="dt">Ocupados_demand   =</span> <span class="kw">sum</span>(PONDERA[ESTADO <span class="op">==</span><span class="st"> </span><span class="dv">1</span> <span class="op">&amp;</span><span class="st"> </span>PP03J <span class="op">==</span><span class="st"> </span><span class="dv">1</span>]),
            <span class="dt">Suboc_demandante  =</span> <span class="kw">sum</span>(PONDERA[ESTADO <span class="op">==</span><span class="st"> </span><span class="dv">1</span> <span class="op">&amp;</span><span class="st"> </span>INTENSI <span class="op">==</span><span class="st"> </span><span class="dv">1</span> <span class="op">&amp;</span><span class="st"> </span>PP03J <span class="op">==</span><span class="st"> </span><span class="dv">1</span>]),
            <span class="dt">Suboc_no_demand   =</span> <span class="kw">sum</span>(PONDERA[ESTADO <span class="op">==</span><span class="st"> </span><span class="dv">1</span> <span class="op">&amp;</span><span class="st"> </span>INTENSI <span class="op">==</span><span class="st"> </span><span class="dv">1</span> <span class="op">&amp;</span><span class="st"> </span>PP03J <span class="op">%in%</span><span class="st"> </span><span class="kw">c</span>(<span class="dv">2</span>, <span class="dv">9</span>)]),
            <span class="dt">Subocupados       =</span> Suboc_demandante <span class="op">+</span><span class="st"> </span>Suboc_no_demand,
            <span class="st">&#39;Tasa Actividad&#39;</span>                  =<span class="st"> </span>PEA<span class="op">/</span>Poblacion,
            <span class="st">&#39;Tasa Empleo&#39;</span>                     =<span class="st"> </span>Ocupados<span class="op">/</span>Poblacion,
            <span class="st">&#39;Tasa Desocupacion&#39;</span>               =<span class="st"> </span>Desocupados<span class="op">/</span>PEA,
            <span class="st">&#39;Tasa ocupados demandantes&#39;</span>       =<span class="st"> </span>Ocupados_demand<span class="op">/</span>PEA,
            <span class="st">&#39;Tasa Subocupación&#39;               = Subocupados/PEA,</span>
<span class="st">            &#39;</span>Tasa Subocupación demandante<span class="st">&#39;    = Suboc_demandante/PEA,</span>
<span class="st">            &#39;</span>Tasa Subocupación no demandante<span class="st">&#39; = Suboc_no_demand/PEA)</span>

<span class="st">Cuadro_1.2a[1:10,]</span></code></pre>
<pre><code>## # A tibble: 10 x 16
##    AGLOMERADO Poblacion Ocupados Desocupados    PEA Ocupados_demand
##         &lt;int&gt;     &lt;int&gt;    &lt;int&gt;       &lt;int&gt;  &lt;int&gt;           &lt;int&gt;
##  1          2    860385   359528       31209 390737           51047
##  2          3    308455   131538       10823 142361           11802
##  3          4   1293438   554680       63370 618050           90662
##  4          5    519469   206044       11279 217323           12185
##  5          6    218671    90908        4181  95089            7247
##  6          7    356298   138937        5928 144865           11973
##  7          8    383974   133077        1867 134944            7660
##  8          9    220357    82286        4639  86925            8478
##  9         10    937900   380621       18830 399451           35043
## 10         12    369673   148114        5956 154070            7086
## # … with 10 more variables: Suboc_demandante &lt;int&gt;, Suboc_no_demand &lt;int&gt;,
## #   Subocupados &lt;int&gt;, `Tasa Actividad` &lt;dbl&gt;, `Tasa Empleo` &lt;dbl&gt;, `Tasa
## #   Desocupacion` &lt;dbl&gt;, `Tasa ocupados demandantes` &lt;dbl&gt;, `Tasa
## #   Subocupación` &lt;dbl&gt;, `Tasa Subocupación demandante` &lt;dbl&gt;, `Tasa
## #   Subocupación no demandante` &lt;dbl&gt;</code></pre>
<pre class="sourceCode r"><code class="sourceCode r">Cuadro_<span class="fl">1.2</span>a &lt;-<span class="st"> </span>Cuadro_<span class="fl">1.2</span>a <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">  </span><span class="kw">select</span>(<span class="op">-</span><span class="kw">c</span>(<span class="dv">2</span><span class="op">:</span><span class="dv">9</span>)) <span class="op">%&gt;%</span><span class="st">    </span><span class="co"># Eliminamos las variables de nivel</span>
<span class="st">  </span><span class="kw">left_join</span>(.,Aglom) <span class="op">%&gt;%</span><span class="st"> </span><span class="co"># Agregamos el nombre de los aglomerados, que teniamos en otro DF</span>
<span class="st">  </span><span class="kw">select</span>(Nom_Aglo,<span class="kw">everything</span>(.),<span class="op">-</span>AGLOMERADO) <span class="co">#Eliminamos el código de los aglomerados</span></code></pre>
<pre><code>## Joining, by = &quot;AGLOMERADO&quot;</code></pre>
<pre class="sourceCode r"><code class="sourceCode r">Cuadro_<span class="fl">1.2</span>a[<span class="dv">1</span><span class="op">:</span><span class="dv">10</span>,]</code></pre>
<pre><code>## # A tibble: 10 x 8
##    Nom_Aglo `Tasa Actividad` `Tasa Empleo` `Tasa Desocupac…
##    &lt;chr&gt;               &lt;dbl&gt;         &lt;dbl&gt;            &lt;dbl&gt;
##  1 &quot; Gran …            0.454         0.418           0.0799
##  2 &quot; Bahía…            0.462         0.426           0.0760
##  3 &quot; Gran …            0.478         0.429           0.103 
##  4 &quot; Gran …            0.418         0.397           0.0519
##  5 &quot; Gran …            0.435         0.416           0.0440
##  6 &quot; Posad…            0.407         0.390           0.0409
##  7 &quot; Gran …            0.351         0.347           0.0138
##  8 &quot; Cdro.…            0.394         0.373           0.0534
##  9 &quot; Gran …            0.426         0.406           0.0471
## 10 &quot; Corri…            0.417         0.401           0.0387
## # … with 4 more variables: `Tasa ocupados demandantes` &lt;dbl&gt;, `Tasa
## #   Subocupación` &lt;dbl&gt;, `Tasa Subocupación demandante` &lt;dbl&gt;, `Tasa
## #   Subocupación no demandante` &lt;dbl&gt;</code></pre>
</div>
<div id="ejercicio-para-2-trimestres" class="section level3">
<h3><span class="header-section-number">4.5.4</span> Ejercicio para 2 trimestres</h3>
<p>A continuación se detallaran los procedimientos necesarios para realizar apilar las bases de dos o más trimestres y calcular de manera conjunta indicadores para cada uno de ellos.<br />
Levantamos la base del 4to Trimestre de 2016</p>
<pre class="sourceCode r"><code class="sourceCode r">Individual_t416 &lt;-
<span class="st">  </span><span class="kw">read.table</span>(<span class="st">&quot;Fuentes/usu_individual_t416.txt&quot;</span>,
  <span class="dt">sep =</span> <span class="st">&quot;;&quot;</span>,
  <span class="dt">dec =</span> <span class="st">&quot;,&quot;</span>,
  <span class="dt">header =</span> <span class="ot">TRUE</span>,
  <span class="dt">fill =</span> <span class="ot">TRUE</span> )  </code></pre>
<div id="select---variables-de-interes" class="section level4">
<h4><span class="header-section-number">4.5.4.1</span> Select - variables de interés</h4>
<p>Para este tipo de ejercicios, donde el volumen de datos es relativamente grande, puede resultar útil restringir la base a nuestras variables de interés para que el procesamiento no sea tan costoso. Para ello, creando previamente un vector de <em>strings</em> con los nombres de las variables, podemos utilizar de la siguiente manera la función <strong>select</strong> para quedarnos sólamente con las mismas.</p>
<pre class="sourceCode r"><code class="sourceCode r">Variables_interes &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="st">&quot;ANO4&quot;</span>,<span class="st">&quot;TRIMESTRE&quot;</span>,<span class="st">&quot;ESTADO&quot;</span>,<span class="st">&quot;PONDERA&quot;</span>,<span class="st">&quot;REGION&quot;</span>,<span class="st">&quot;AGLOMERADO&quot;</span>)

Basesita_t416 &lt;-<span class="st"> </span>Individual_t416 <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">select</span>(Variables_interes)
Basesita_t117 &lt;-<span class="st"> </span>Individual_t117 <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">select</span>(Variables_interes)</code></pre>
</div>
<div id="bind_rows" class="section level4">
<h4><span class="header-section-number">4.5.4.2</span> bind_rows</h4>
<p>La función <strong>bind_rows</strong> nos permitirá apilar dos bases de datos en un solo dataframe. La misma evalua los nombres de las variables de cada una de las bases para adjuntar el contenido de ambas en las variables comunes. En caso de que una de las bases tuviera una variable que la otra no, se conservaran dichos datos, quedando como <code>NA</code> los valores para la otra base.</p>
<pre class="sourceCode r"><code class="sourceCode r">Union_Bases &lt;-<span class="st"> </span><span class="kw">bind_rows</span>(Basesita_t416,Basesita_t117)
<span class="co">##alternativamente</span>
Union_Bases &lt;-<span class="st"> </span>Basesita_t416 <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">  </span><span class="kw">bind_rows</span>(Basesita_t117)</code></pre>
<p>Una vez que contamos con nuestra unión de las bases de 2 o más trimestres, procederemos a realizar los cálculos que deseamos agrupando por las variables <strong>ANO4</strong> y <strong>TRIMESTRE</strong>. Esto nos permitirá realizar estimaciones para sendos períodos al mismo tiempo. Por ejemplo, a continuación tomamos parte del código desarrollado anteriormente para calcular las tasas de Actividad, Empleo, y Desocupación.</p>
<pre class="sourceCode r"><code class="sourceCode r">Tasas_dos_trimestres &lt;-<span class="st"> </span>Union_Bases <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">  </span><span class="kw">group_by</span>(ANO4,TRIMESTRE) <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">  </span><span class="kw">summarise</span>(<span class="dt">Poblacion         =</span> <span class="kw">sum</span>(PONDERA),
            <span class="dt">Ocupados          =</span> <span class="kw">sum</span>(PONDERA[ESTADO <span class="op">==</span><span class="st"> </span><span class="dv">1</span>]),
            <span class="dt">Desocupados       =</span> <span class="kw">sum</span>(PONDERA[ESTADO <span class="op">==</span><span class="st"> </span><span class="dv">2</span>]),
            <span class="dt">PEA               =</span> Ocupados <span class="op">+</span><span class="st"> </span>Desocupados,
            <span class="st">&#39;Tasa Actividad&#39;</span>                  =<span class="st"> </span>PEA<span class="op">/</span>Poblacion,
            <span class="st">&#39;Tasa Empleo&#39;</span>                     =<span class="st"> </span>Ocupados<span class="op">/</span>Poblacion,
            <span class="st">&#39;Tasa Desocupacion&#39;</span>               =<span class="st"> </span>Desocupados<span class="op">/</span>PEA) <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">  </span><span class="kw">select</span>(<span class="dv">1</span><span class="op">:</span><span class="dv">2</span>,<span class="dv">7</span><span class="op">:</span><span class="kw">ncol</span>(.))

Tasas_dos_trimestres</code></pre>
<pre><code>## # A tibble: 2 x 5
## # Groups:   ANO4 [2]
##    ANO4 TRIMESTRE `Tasa Actividad` `Tasa Empleo` `Tasa Desocupacion`
##   &lt;int&gt;     &lt;int&gt;            &lt;dbl&gt;         &lt;dbl&gt;               &lt;dbl&gt;
## 1  2016         4            0.453         0.419              0.0756
## 2  2017         1            0.455         0.413              0.0921</code></pre>
</div>
<div id="exportar-resultados-a-excel" class="section level4">
<h4><span class="header-section-number">4.5.4.3</span> Exportar resultados a Excel</h4>
<p>Como vieramos en la clase 1, la función <strong>write.xlsx</strong> de la libreria <em>openxlsx</em> nos permite exportar los dos dataframes a un mismo archivo. Cabe aclarar que existen numerosas funciones y librerías alternativas para exportar resultados a un excel. En este caso, optamos por <em>openxlsx</em> ya que resulta una de las más sencillas para exportar rapidamente los resultados. Otras librerías permiten también dar formato a las tablas que se exportan, definir si deseamos sobreescribir archivos en caso de que ya existan, etc.</p>
<pre class="sourceCode r"><code class="sourceCode r">Lista_a_exportar &lt;-<span class="st"> </span><span class="kw">list</span>(<span class="st">&quot;Cuadro 1.1&quot;</span> =<span class="st"> </span>Cuadro_<span class="fl">1.1</span>a,
                      <span class="st">&quot;Cuadro 1.2&quot;</span> =<span class="st"> </span>Cuadro_<span class="fl">1.2</span>a)

<span class="co"># write.xlsx(Lista_a_exportar,&quot;../Resultados/Informe Mercado de Trabajo.xlsx&quot;)</span></code></pre>
</div>
</div>
</div>
<div id="ejercicios-para-practicar-1" class="section level2">
<h2><span class="header-section-number">4.6</span> Ejercicios para practicar</h2>
<ul>
<li>Levantar la última base individual de EPH</li>
<li>Crear un vector llamado <strong>Variables</strong> que contenga los nombres de las variables de interés que refieren a las siguientes características:
- Edad, Sexo, Ingreso de la ocupación principal, Categoría ocupacional, ESTADO, PONDERA y PONDIH</li>
<li><p>Acotar la Base únicamente a las variables de interés, utilizando el vector <strong>Variables</strong></p></li>
<li>Calcular las tasas de actividad, empleo y desempleo según sexo, para jóvenes entre 18 y 35 años</li>
<li>Calcular el salario promedio por sexo, para dos grupos de edad: 18 a 35 años y 36 a 70 años. (Recordatorio: La base debe filtrarse para contener únicamente OCUPADOS ASALARIADOS)</li>
<li><p>Grabar los resultados en un excel</p></li>
</ul>
<div id="ejercicios-de-tarea-1" class="section level3">
<h3><span class="header-section-number">4.6.1</span> Ejercicios de tarea</h3>
<ul>
<li>Replicar el cálculo de las tasas logradas en clase para distintos trimestres, levantando las bases desde el segundo trimestre 2016 hasta la última.
<ul>
<li>Tips: juntar las bases con el comando <code>bind_rows()</code></li>
<li>Probar con <code>gather()</code> y <code>spread()</code> como quedan mejor los resultados</li>
</ul></li>
<li>Grabar los resultados en un excel</li>
</ul>

</div>
</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="introduccion-a-r.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="calculo-de-pobreza-por-linea.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/lunr.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"google": false,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"all": ["facebook", "google", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": null,
"text": null
},
"history": {
"link": null,
"text": null
},
"download": null,
"toc": {
"collapse": "subsection"
}
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:" && /^https?:/.test(src))
      src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
